{"version":3,"sources":["../src/app.js"],"names":["err","console","error","app","close","process","exit","shutdown","SERVICE_NAME","config","get","HOST","PORT","HOSTPORT","Player_Service_PROTO","__dirname","main","Mali","use","start","log","on"],"mappings":";;;+BA0BA,WAAyBA,GAAzB,EAA8B;AAC5B,QAAIA,GAAJ,EAASC,QAAQC,KAAR,CAAcF,GAAd;AACT,UAAMG,IAAIC,KAAJ,EAAN;AACAC,YAAQC,IAAR;AACD,G;;kBAJcC,Q;;;;;AA1Bf;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,MAAMC,eAAeC,iBAAOC,GAAP,CAAW,MAAX,CAArB;AACA,MAAMC,OAAOF,iBAAOC,GAAP,CAAW,MAAX,CAAb;AACA,MAAME,OAAOH,iBAAOC,GAAP,CAAW,MAAX,CAAb;;AAEA,MAAMG,WAAY,GAAEF,IAAK,IAAGC,IAAK,EAAjC;AACA,IAAIT,GAAJ;;AAEA;AACA,MAAMW,uBAAwB,GAAEC,SAAU,wBAA1C;;AAEA,SAASC,IAAT,GAAiB;AACfb,QAAM,IAAIc,cAAJ,CAASH,oBAAT,EAA+BN,YAA/B,EAA6C,EAA7C,CAAN;;AAEAL,MAAIe,GAAJ,CAAQ,2BAAR;;AAEA,uBAAYf,GAAZ;;AAEAA,MAAIgB,KAAJ,CAAUN,QAAV;AACAZ,UAAQmB,GAAR,CAAa,GAAEZ,YAAa,cAAaK,QAAS,EAAlD;AACD;;AAQDR,QAAQgB,EAAR,CAAW,mBAAX,EAAgCd,QAAhC;AACAF,QAAQgB,EAAR,CAAW,QAAX,EAAqBd,QAArB;AACAF,QAAQgB,EAAR,CAAW,SAAX,EAAsBd,QAAtB;;AAEAS","file":"app.js","sourcesContent":["import config from 'config'\nimport Mali from 'mali'\nimport logger from 'mali-logger'\nimport RouteConfig from './route'\n\nconst SERVICE_NAME = config.get('name')\nconst HOST = config.get('host')\nconst PORT = config.get('port')\n\nconst HOSTPORT = `${HOST}:${PORT}`\nlet app\n\n//const SAMPLE_PROTO = '/proto/sample.proto'\nconst Player_Service_PROTO = `${__dirname}/../proto/player.proto`\n\nfunction main () {\n  app = new Mali(Player_Service_PROTO, SERVICE_NAME, {})\n\n  app.use(logger())\n\n  RouteConfig(app)\n\n  app.start(HOSTPORT)\n  console.log(`${SERVICE_NAME} running @ ${HOSTPORT}`)\n}\n\nasync function shutdown (err) {\n  if (err) console.error(err)\n  await app.close()\n  process.exit()\n}\n\nprocess.on('uncaughtException', shutdown)\nprocess.on('SIGINT', shutdown)\nprocess.on('SIGTERM', shutdown)\n\nmain()\n"]}