{"ast":null,"code":"//import {RpcError as GrpcWebError} from 'grpc-web';\nimport { PlayerServiceClient } from '../proto/player_grpc_web_pb';\nimport { ClientMessage } from '../proto/player_pb';\nexport function PlayerService() {\n  this.client;\n  if (false) return;\n\n  if (!this.client) {\n    this.client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n  }\n}\n_c = PlayerService;\n\nPlayerService.prototype.join = function join() {\n  if (!this.client) {\n    this.client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n  }\n\n  var clientMessage = new ClientMessage();\n  clientMessage.setA('542');\n  clientMessage.setB('234');\n  clientMessage.setC('1252');\n  clientMessage.setD('2345');\n  var stream = this.client.join(clientMessage);\n  stream.on('data', function (message) {\n    console.log(\"client received$ \".concat(message));\n  });\n};\n\nPlayerService.prototype.send = function (params) {\n  var clientMessage = new ClientMessage();\n  clientMessage.setA(params.getA());\n  clientMessage.setB(params.getB());\n  clientMessage.setC(params.getC());\n  clientMessage.setD(params.getD());\n  this.client.send(clientMessage, undefined, function (err, response) {\n    if (err) {\n      console.error(err);\n    } else {\n      console.log('response', response.toObject());\n      document.getElementById('message').value = '';\n    }\n  });\n};\n\nexport default PlayerService;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlayerService\");","map":{"version":3,"sources":["/Users/amit/Projects/sound-visualization/client/services/PlayerService.ts"],"names":["PlayerServiceClient","ClientMessage","PlayerService","client","window","location","hostname","prototype","join","clientMessage","setA","setB","setC","setD","stream","on","message","console","log","send","params","getA","getB","getC","getD","undefined","err","response","error","toObject","document","getElementById","value"],"mappings":"AAAA;AACA,SAASA,mBAAT,QAAoC,6BAApC;AACA,SAASC,aAAT,QAA6C,oBAA7C;AAEA,OAAO,SAASC,aAAT,GAAyB;AAC5B,OAAKC,MAAL;AACA,aAAmC;;AACnC,MAAI,CAAC,KAAKA,MAAV,EAAkB;AACd,SAAKA,MAAL,GAAc,IAAIH,mBAAJ,CAAwB,YAAYI,MAAM,CAACC,QAAP,CAAgBC,QAA5B,GAAuC,QAA/D,CAAd;AACH;AAEJ;KAPeJ,a;;AAShBA,aAAa,CAACK,SAAd,CAAwBC,IAAxB,GAA+B,SAASA,IAAT,GAAgB;AAC3C,MAAI,CAAC,KAAKL,MAAV,EAAkB;AACd,SAAKA,MAAL,GAAc,IAAIH,mBAAJ,CAAwB,YAAYI,MAAM,CAACC,QAAP,CAAgBC,QAA5B,GAAuC,QAA/D,CAAd;AACH;;AACD,MAAMG,aAAa,GAAG,IAAIR,aAAJ,EAAtB;AACAQ,EAAAA,aAAa,CAACC,IAAd,CAAmB,KAAnB;AACAD,EAAAA,aAAa,CAACE,IAAd,CAAmB,KAAnB;AACAF,EAAAA,aAAa,CAACG,IAAd,CAAmB,MAAnB;AACAH,EAAAA,aAAa,CAACI,IAAd,CAAmB,MAAnB;AACA,MAAMC,MAAM,GAAG,KAAKX,MAAL,CAAYK,IAAZ,CAAiBC,aAAjB,CAAf;AACAK,EAAAA,MAAM,CAACC,EAAP,CAAU,MAAV,EAAkB,UAACC,OAAD,EAA4B;AAC1CC,IAAAA,OAAO,CAACC,GAAR,4BAAgCF,OAAhC;AACH,GAFD;AAGH,CAbD;;AAeAd,aAAa,CAACK,SAAd,CAAwBY,IAAxB,GAA+B,UAAUC,MAAV,EAAgC;AAC3D,MAAMX,aAAa,GAAG,IAAIR,aAAJ,EAAtB;AACAQ,EAAAA,aAAa,CAACC,IAAd,CAAmBU,MAAM,CAACC,IAAP,EAAnB;AACAZ,EAAAA,aAAa,CAACE,IAAd,CAAmBS,MAAM,CAACE,IAAP,EAAnB;AACAb,EAAAA,aAAa,CAACG,IAAd,CAAmBQ,MAAM,CAACG,IAAP,EAAnB;AACAd,EAAAA,aAAa,CAACI,IAAd,CAAmBO,MAAM,CAACI,IAAP,EAAnB;AACA,OAAKrB,MAAL,CAAYgB,IAAZ,CACIV,aADJ,EAEIgB,SAFJ,EAGI,UAACC,GAAD,EAAWC,QAAX,EAAuC;AACnC,QAAID,GAAJ,EAAS;AACLT,MAAAA,OAAO,CAACW,KAAR,CAAcF,GAAd;AACH,KAFD,MAEO;AACHT,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBS,QAAQ,CAACE,QAAT,EAAxB;AACCC,MAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAD,CAAyDC,KAAzD,GAAiE,EAAjE;AACH;AACJ,GAVL;AAWH,CAjBD;;AAmBA,eAAe9B,aAAf","sourcesContent":["//import {RpcError as GrpcWebError} from 'grpc-web';\nimport { PlayerServiceClient } from '../proto/player_grpc_web_pb';\nimport { ClientMessage, ServerMessage } from '../proto/player_pb';\n\nexport function PlayerService() {\n    this.client;\n    if (typeof window === 'undefined') return;\n    if (!this.client) {\n        this.client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n    }\n\n}\n\nPlayerService.prototype.join = function join() {\n    if (!this.client) {\n        this.client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n    }\n    const clientMessage = new ClientMessage();\n    clientMessage.setA('542')\n    clientMessage.setB('234')\n    clientMessage.setC('1252')\n    clientMessage.setD('2345')\n    const stream = this.client.join(clientMessage);\n    stream.on('data', (message: ServerMessage) => {\n        console.log(`client received$ ${message}`)\n    });\n}\n\nPlayerService.prototype.send = function (params:ClientMessage) {\n    const clientMessage = new ClientMessage();\n    clientMessage.setA(params.getA());\n    clientMessage.setB(params.getB());\n    clientMessage.setC(params.getC());\n    clientMessage.setD(params.getD());\n    this.client.send(\n        clientMessage,\n        undefined,\n        (err: any, response: ServerMessage) => {\n            if (err) {\n                console.error(err);\n            } else {\n                console.log('response', response.toObject());\n                (document.getElementById('message') as HTMLFormElement)!.value = '';\n            }\n        })\n}\n\nexport default PlayerService\n"]},"metadata":{},"sourceType":"module"}