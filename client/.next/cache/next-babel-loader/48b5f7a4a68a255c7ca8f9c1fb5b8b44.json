{"ast":null,"code":"import * as grpc from '@grpc/grpc-js';\nimport * as protoLoader from '@grpc/proto-loader'; //import { ProtoGrpcType } from '../proto/player.proto';\n\nconst host = '0.0.0.0:50051';\nconst packageDefinition = protoLoader.loadSync('./proto/example.proto');\nconst proto = grpc.loadPackageDefinition(packageDefinition); //as unknown as ProtoGrpcType;\n// @ts-ignore\n\nconst client = new proto.player.PlayerService(host, grpc.credentials.createInsecure());\nlet stream = null;\nconst deadline = new Date();\ndeadline.setSeconds(deadline.getSeconds() + 15);\nclient.waitForReady(deadline, error => {\n  if (error) {\n    console.log(`Client connect error: ${error.message}`);\n  }\n});\nexport function updateSample(params) {\n  client.unaryCall(params, // {\n  //     clientMessage: 'Message from client',\n  // },\n  (error, serverMessage) => {\n    if (error) {\n      console.error(error.message);\n    } else if (serverMessage) {\n      console.log(`(client) Got server message: ${serverMessage.serverMessage}`);\n    }\n  });\n}\n\nfunction doServerStreamingCall() {\n  const stream = client.serverStreamingCall({\n    clientMessage: 'Message from client'\n  });\n  stream.on('data', serverMessage => {\n    console.log(`(client) Got server message: ${serverMessage.serverMessage}`);\n  });\n}\n\nfunction doClientStreamingCall() {\n  const stream = client.clientStreamingCall(error => {\n    if (error) {\n      console.error(error.message);\n    }\n  });\n  stream.write({\n    clientMessage: 'Message from client'\n  });\n}\n\nfunction doBidirectionalStreamingCall() {\n  const stream = client.bidirectionalStreamingCall(); // Server stream\n\n  stream.on('data', serverMessage => {\n    console.log(`(client) Got server message: ${serverMessage.serverMessage}`);\n  }); // Client stream\n\n  stream.write({\n    clientMessage: 'Message from client'\n  });\n}","map":null,"metadata":{},"sourceType":"module"}