{"ast":null,"code":"//import {RpcError as GrpcWebError} from 'grpc-web';\nimport { PlayerServiceClient } from '../proto/player_grpc_web_pb';\nimport { ClientMessage } from '../proto/player_pb';\nlet client;\nexport function PlayerService() {\n  if (true) return;\n\n  if (!client) {\n    client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n  }\n}\n\nPlayerService.prototype.join = function join() {\n  if (!client) {\n    client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n  }\n\n  const clientMessage = new ClientMessage();\n  clientMessage.setA('542');\n  clientMessage.setB('234');\n  clientMessage.setC('1252');\n  clientMessage.setD('2345');\n  const stream = client.pointBit(clientMessage);\n  stream.on('data', message => {\n    console.log(`client received$ ${message}`);\n  });\n};\n\nPlayerService.prototype.send = function (params) {\n  if (!client) {\n    client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n  }\n\n  const clientMessage = new ClientMessage();\n  clientMessage.setA(params.getA());\n  clientMessage.setB(params.getB());\n  clientMessage.setC(params.getC());\n  clientMessage.setD(params.getD());\n  client.send(clientMessage, undefined, (err, response) => {\n    if (err) {\n      console.error(err);\n    } else {\n      console.log('response', response.toObject());\n      document.getElementById('message').value = '';\n    }\n  });\n};\n\nPlayerService.prototype.pointBit = function (params) {\n  if (!client) {\n    client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n  }\n\n  const clientMessage = new ClientMessage();\n  clientMessage.setA(params.getA());\n  clientMessage.setB(params.getB());\n  clientMessage.setC(params.getC());\n  clientMessage.setD(params.getD());\n  client.send(clientMessage, undefined, (err, response) => {\n    if (err) {\n      console.error(err);\n    } else {\n      console.log('response', response.toObject());\n      document.getElementById('message').value = '';\n    }\n  });\n};\n\nexport default PlayerService;","map":{"version":3,"sources":["/Users/amit/Projects/sound-visualization/client/services/PlayerService.ts"],"names":["PlayerServiceClient","ClientMessage","client","PlayerService","window","location","hostname","prototype","join","clientMessage","setA","setB","setC","setD","stream","pointBit","on","message","console","log","send","params","getA","getB","getC","getD","undefined","err","response","error","toObject","document","getElementById","value"],"mappings":"AAAA;AACA,SAASA,mBAAT,QAAoC,6BAApC;AACA,SAASC,aAAT,QAA6C,oBAA7C;AAEA,IAAIC,MAAJ;AAEA,OAAO,SAASC,aAAT,GAAyB;AAE5B,YAAmC;;AACnC,MAAI,CAACD,MAAL,EAAa;AACTA,IAAAA,MAAM,GAAG,IAAIF,mBAAJ,CAAwB,YAAYI,MAAM,CAACC,QAAP,CAAgBC,QAA5B,GAAuC,QAA/D,CAAT;AACH;AAEJ;;AAEDH,aAAa,CAACI,SAAd,CAAwBC,IAAxB,GAA+B,SAASA,IAAT,GAAgB;AAC3C,MAAI,CAACN,MAAL,EAAa;AACTA,IAAAA,MAAM,GAAG,IAAIF,mBAAJ,CAAwB,YAAYI,MAAM,CAACC,QAAP,CAAgBC,QAA5B,GAAuC,QAA/D,CAAT;AACH;;AACD,QAAMG,aAAa,GAAG,IAAIR,aAAJ,EAAtB;AACAQ,EAAAA,aAAa,CAACC,IAAd,CAAmB,KAAnB;AACAD,EAAAA,aAAa,CAACE,IAAd,CAAmB,KAAnB;AACAF,EAAAA,aAAa,CAACG,IAAd,CAAmB,MAAnB;AACAH,EAAAA,aAAa,CAACI,IAAd,CAAmB,MAAnB;AACA,QAAMC,MAAM,GAAGZ,MAAM,CAACa,QAAP,CAAgBN,aAAhB,CAAf;AACAK,EAAAA,MAAM,CAACE,EAAP,CAAU,MAAV,EAAmBC,OAAD,IAA4B;AAC1CC,IAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBF,OAAQ,EAAxC;AACH,GAFD;AAGH,CAbD;;AAeAd,aAAa,CAACI,SAAd,CAAwBa,IAAxB,GAA+B,UAAUC,MAAV,EAAgC;AAC3D,MAAI,CAACnB,MAAL,EAAa;AACTA,IAAAA,MAAM,GAAG,IAAIF,mBAAJ,CAAwB,YAAYI,MAAM,CAACC,QAAP,CAAgBC,QAA5B,GAAuC,QAA/D,CAAT;AACH;;AACD,QAAMG,aAAa,GAAG,IAAIR,aAAJ,EAAtB;AACAQ,EAAAA,aAAa,CAACC,IAAd,CAAmBW,MAAM,CAACC,IAAP,EAAnB;AACAb,EAAAA,aAAa,CAACE,IAAd,CAAmBU,MAAM,CAACE,IAAP,EAAnB;AACAd,EAAAA,aAAa,CAACG,IAAd,CAAmBS,MAAM,CAACG,IAAP,EAAnB;AACAf,EAAAA,aAAa,CAACI,IAAd,CAAmBQ,MAAM,CAACI,IAAP,EAAnB;AACAvB,EAAAA,MAAM,CAACkB,IAAP,CACIX,aADJ,EAEIiB,SAFJ,EAGI,CAACC,GAAD,EAAWC,QAAX,KAAuC;AACnC,QAAID,GAAJ,EAAS;AACLT,MAAAA,OAAO,CAACW,KAAR,CAAcF,GAAd;AACH,KAFD,MAEO;AACHT,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBS,QAAQ,CAACE,QAAT,EAAxB;AACCC,MAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAD,CAAyDC,KAAzD,GAAiE,EAAjE;AACH;AACJ,GAVL;AAWH,CApBD;;AAsBA9B,aAAa,CAACI,SAAd,CAAwBQ,QAAxB,GAAmC,UAAUM,MAAV,EAAgC;AAC/D,MAAI,CAACnB,MAAL,EAAa;AACTA,IAAAA,MAAM,GAAG,IAAIF,mBAAJ,CAAwB,YAAYI,MAAM,CAACC,QAAP,CAAgBC,QAA5B,GAAuC,QAA/D,CAAT;AACH;;AACD,QAAMG,aAAa,GAAG,IAAIR,aAAJ,EAAtB;AACAQ,EAAAA,aAAa,CAACC,IAAd,CAAmBW,MAAM,CAACC,IAAP,EAAnB;AACAb,EAAAA,aAAa,CAACE,IAAd,CAAmBU,MAAM,CAACE,IAAP,EAAnB;AACAd,EAAAA,aAAa,CAACG,IAAd,CAAmBS,MAAM,CAACG,IAAP,EAAnB;AACAf,EAAAA,aAAa,CAACI,IAAd,CAAmBQ,MAAM,CAACI,IAAP,EAAnB;AACAvB,EAAAA,MAAM,CAACkB,IAAP,CACIX,aADJ,EAEIiB,SAFJ,EAGI,CAACC,GAAD,EAAWC,QAAX,KAAuC;AACnC,QAAID,GAAJ,EAAS;AACLT,MAAAA,OAAO,CAACW,KAAR,CAAcF,GAAd;AACH,KAFD,MAEO;AACHT,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBS,QAAQ,CAACE,QAAT,EAAxB;AACCC,MAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAD,CAAyDC,KAAzD,GAAiE,EAAjE;AACH;AACJ,GAVL;AAWH,CApBD;;AAuBA,eAAe9B,aAAf","sourcesContent":["//import {RpcError as GrpcWebError} from 'grpc-web';\nimport { PlayerServiceClient } from '../proto/player_grpc_web_pb';\nimport { ClientMessage, ServerMessage } from '../proto/player_pb';\n\nlet client\n\nexport function PlayerService() {\n\n    if (typeof window === 'undefined') return;\n    if (!client) {\n        client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n    }\n\n}\n\nPlayerService.prototype.join = function join() {\n    if (!client) {\n        client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n    }\n    const clientMessage = new ClientMessage();\n    clientMessage.setA('542')\n    clientMessage.setB('234')\n    clientMessage.setC('1252')\n    clientMessage.setD('2345')\n    const stream = client.pointBit(clientMessage);\n    stream.on('data', (message: ServerMessage) => {\n        console.log(`client received$ ${message}`)\n    });\n}\n\nPlayerService.prototype.send = function (params:ClientMessage) {\n    if (!client) {\n        client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n    }\n    const clientMessage = new ClientMessage();\n    clientMessage.setA(params.getA());\n    clientMessage.setB(params.getB());\n    clientMessage.setC(params.getC());\n    clientMessage.setD(params.getD());\n    client.send(\n        clientMessage,\n        undefined,\n        (err: any, response: ServerMessage) => {\n            if (err) {\n                console.error(err);\n            } else {\n                console.log('response', response.toObject());\n                (document.getElementById('message') as HTMLFormElement)!.value = '';\n            }\n        })\n}\n\nPlayerService.prototype.pointBit = function (params:ClientMessage) {\n    if (!client) {\n        client = new PlayerServiceClient('http://' + window.location.hostname + ':50051');\n    }\n    const clientMessage = new ClientMessage();\n    clientMessage.setA(params.getA());\n    clientMessage.setB(params.getB());\n    clientMessage.setC(params.getC());\n    clientMessage.setD(params.getD());\n    client.send(\n        clientMessage,\n        undefined,\n        (err: any, response: ServerMessage) => {\n            if (err) {\n                console.error(err);\n            } else {\n                console.log('response', response.toObject());\n                (document.getElementById('message') as HTMLFormElement)!.value = '';\n            }\n        })\n}\n\n\nexport default PlayerService\n"]},"metadata":{},"sourceType":"module"}